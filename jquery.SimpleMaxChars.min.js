/**
 * SimpleMaxChars jQuery Plugin
 * http://joshmccarty.com
 *
 * Copyright (c)2012, Josh McCarty
 * License: GPL Version 2
 * http://www.gnu.org/licenses/gpl-2.0.txt
 *
 * Tested with jQuery 1.6.2+, IE7+, Chrome 17, Firefox 8
 */
;(function($){$.fn.SimpleMaxChars=function(options){var opts=$.extend({},$.fn.SimpleMaxChars.defaults,options);if(opts.debug===true){debug(this,opts);}
return this.each(function(){var $this=$(this);var messageCount=$('.'+opts.messageClass).length;messageCount++;$this.after('<span id="'+opts.messageClass+'-'+messageCount+'"></span>');var $container=$('#'+opts.messageClass+'-'+messageCount);var maxLength=opts.maxChars;if(typeof maxLength==="undefined"){if(typeof $this.attr('maxlength')==="undefined"||$this.attr('maxlength')===""){maxLength=opts.defaultMaxChars;$this.prop('maxLength',maxLength);}
else{maxLength=$this.prop('maxLength');if(typeof maxLength==="undefined"){maxLength=$this.attr('maxlength');}}}
else{$this.prop('maxLength',maxLength);}
var fieldValue=$this.val();var fieldLength=fieldValue.length;var message=$.fn.SimpleMaxChars.message(fieldLength,opts,maxLength);$container.html(message);$this.keyup(function(){fieldValue=$this.val();fieldLength=fieldValue.length;message=$.fn.SimpleMaxChars.message(fieldLength,opts,maxLength);$container.html(message);});});};function debug($obj,opts){if($obj.length===0){alert('No matching form fields were found.');}}
$.fn.SimpleMaxChars.message=function(chars,opts,maxLength){var remainingChars=maxLength-chars;var lineBreak="";var html="";var messageClass=opts.messageClass;if(opts.lineBreak===true){lineBreak='<br />';}
if(remainingChars<opts.warningLimit){messageClass+=" "+opts.warningClass;}
html=lineBreak+'<span class="'+messageClass+'">'+remainingChars+' characters remaining.</span>';return html;};$.fn.SimpleMaxChars.defaults={maxChars:undefined,defaultMaxChars:255,warningLimit:20,messageClass:'simple-maxchars-message',warningClass:'warning',lineBreak:false,debug:false};})(jQuery);